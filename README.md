# Video Segmentation App

–ú–∞—Ç—Ç–∏–Ω–≥ –∏ –∑–∞–º–µ–Ω–∞ —Ñ–æ–Ω–∞ –≤ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TensorFlow.js –∏ Robust Video Matting (RVM).

–°–æ–∑–¥–∞–Ω–æ –Ω–∞ React, TypeScript –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Feature-Sliced Design (FSD).

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –û–Ω–ª–∞–π–Ω —É–¥–∞–ª–µ–Ω–∏–µ –∏ –∑–∞–º–µ–Ω–∞ —Ñ–æ–Ω–∞ –¥–ª—è –≤–∏–¥–µ–æ –∏ –ø–æ—Ç–æ–∫–æ–≤ (–∫–∞–º–µ—Ä–∞ –∏–ª–∏ —Ñ–∞–π–ª—ã)
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä WebGPU/WebGL/WASM/CPU –±—ç–∫–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ TensorFlow.js
- RVM ‚Äî —É—Å—Ç–æ–π—á–∏–≤–∞—è –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
- –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏, –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞–º–∏ –∏ –≤–µ–±-–∫–∞–º–µ—Ä–æ–π
- –ì–∏–±–∫–∞—è FSD —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –í–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–æ–Ω–∞: —Å–ø–ª–æ—à–Ω–æ–π —Ü–≤–µ—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —Ä–∞–∑–º—ã—Ç–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –ø–∞–º—è—Ç–∏: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–µ–Ω–¥, –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (FSD)

```
src/
  features/             # –§–∏—á–∏, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  entities/             # –°—É—â–Ω–æ—Å—Ç–∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
  shared/
    lib/
      ml/               # –ê–ª–≥–æ—Ä–∏—Ç–º—ã –º–æ–¥–µ–ª–µ–π, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
        video-segmenter/
          video-segmenter.ts
          types.ts
        rvm/
          infer-rvm.ts
          compose.ts
          load-rvm.ts
    ui/                 # –ß–∏—Å—Ç—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  widgets/              # –ö—Ä—É–ø–Ω—ã–µ UI —Å–±–æ—Ä–∫–∏ (–ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å –∏ —Ç.–¥.)
  pages/                # –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
  app/                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ä–æ—É—Ç–∏–Ω–≥
  process/              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∫–æ–Ω—Ñ–∏–≥, —Ä–∞–Ω—Ç–∞–π–º
```

## üõ†Ô∏è –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
# –∏–ª–∏
yarn install
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ RVM

- –ü–æ–ª—É—á–∏—Ç–µ TFJS —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏ RVM (–Ω–∞–ø—Ä–∏–º–µ—Ä, `rvm_mobilenetv3_tfjs_int8.zip`)
- –ò–∑–≤–ª–µ–∫–∏—Ç–µ –≤ `public/models/rvm_mobilenetv3_tfjs_int8/` —á—Ç–æ–±—ã —É –≤–∞—Å –±—ã–ª–∏:
  - `public/models/rvm_mobilenetv3_tfjs_int8/model.json`
  - `public/models/rvm_mobilenetv3_tfjs_int8/group1-shard*.bin`

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173

## ü§ñ ML –ö–æ–Ω–≤–µ–π–µ—Ä

- –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –≤–∏–¥–µ–æ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∏ –ø–æ–¥–∞–µ—Ç—Å—è –≤ TFJS –º–æ–¥–µ–ª—å RVM —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –í—ã—Ö–æ–¥—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –∫–∞–∫ RGBA –∏ –∫–æ–º–ø–æ–∑–∏—Ä—É—é—Ç—Å—è —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–æ–Ω–æ–º
- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ canvas –∏–ª–∏ –∫–∞–∫ ImageBitmap –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –í—Å–µ —Ç–µ–Ω–∑–æ—Ä—ã –∏ —Ä–µ—Å—É—Ä—Å—ã —è–≤–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

## ‚ö° –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Frontend**: React + TypeScript
- **ML**: TensorFlow.js (WebGPU/WebGL/WASM/CPU)
- **–ú–æ–¥–µ–ª—å**: Robust Video Matting (RVM)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Feature-Sliced Design (FSD)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**: Zustand
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏**: Vite, ESLint, Prettier

## üì¶ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- `src/shared/lib/ml/video-segmenter/video-segmenter.ts`: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω–≤–µ–π–µ—Ä —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
- `src/shared/lib/ml/rvm/`: –£—Ç–∏–ª–∏—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏, –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
- `src/features/rvm-infer/rvm-infer.tsx`: –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å React
- `src/widgets/video-output/video-output.tsx`: –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å, UI –∫–æ–º–ø–æ–∑–∏—Ü–∏—è

## üßπ –ü–∞–º—è—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏**: –í—Å–µ –æ–±—ä–µ–∫—Ç—ã, —Ç–µ–Ω–∑–æ—Ä—ã –∏ bitmap –æ—á–∏—â–∞—é—Ç—Å—è –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ (—Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ)
- **OffscreenCanvas**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –±—ç–∫–µ–Ω–¥–∞**: –í—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –±—ç–∫–µ–Ω–¥ (WebGPU > WebGL > WASM > CPU)
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**: –î–æ 30 FPS, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ GPU

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–∏—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```bash
npm run build
```

–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø–∞–ø–∫—É `dist` –Ω–∞ –≤–∞—à–µ–π –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Ö–æ—Å—Ç–∏–Ω–≥–∞.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª—É—á—à–∏–π –±—ç–∫–µ–Ω–¥ TensorFlow.js, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

- –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (FPS, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ)
- –û–ø—Ü–∏–∏ —Ñ–æ–Ω–∞

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Robust Video Matting (RVM)](https://github.com/PeterL1n/RobustVideoMatting)
- [TensorFlow.js](https://www.tensorflow.org/js)
- [Feature-Sliced Design Community](https://feature-sliced.design/)